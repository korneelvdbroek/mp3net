<!DOCTYPE html>
<html lang="en">

<head>
    <title>MP3net</title>

    <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/player.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="box">
        <div class="row header panel"></div>

        <div class="row spacer"></div>

        <div class="row content panel">
            <article id="post-0" class="exhibit post-0 post type-post status-publish format-standard hentry category-uncategorized tag-data-visualization tag-map">

                <header class="entry-header">
                    <h1 class="entry-title">MP3net</h1>
                </header><!-- .entry-header -->


                <div id='player' class='player'>
                    <div class='controls'>
                        <p>
                            Sample:
                            <select id='select-sample'>
                              <option value="sample-0">Sample 1</option>
                              <option value="sample-1">Sample 2</option>
                            </select>
                        </p>
                    </div>
                    <div class='spectrogram'>
                        <div class='crosshair'></div>
                        <div class='underlay'>
                            <img id="image" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" width="0" height="0" alt="" />
                        </div>
                    </div>
                    <div class='audio-controls'>
                        <button id="playpause" disabled class='playpause' title="play">
                            <svg class='play-img' width="14px" height="19px" viewBox="0 0 14 19">
                                <polygon id="Triangle" fill="#000000" transform="translate(9, 9.5) rotate(90) translate(-7, -9.5) " points="7 2.5 16.5 16.5 -2.5 16.5"></polygon>
                            </svg>
                            <svg class='pause-img' width="16px" height="19px" viewBox="0 0 16 19">
                                <g fill="#000000" stroke="#000000">
                                    <rect id="Rectangle" x="0.5" y="0.5" width="4" height="18"></rect>
                                    <rect id="Rectangle" x="11.5" y="0.5" width="4" height="18"></rect>
                                </g>
                            </svg>
                        </button>
                        <audio id='play-1' class='play'>
                            <source id='src1' src='samples/sample-0.ogg' type='audio/ogg'>
                            <source id='src2' src='samples/sample-0.wav' type='audio/wav'>
                        </audio>
                        <div class='response'>
                            <canvas class='response-canvas'></canvas>
                        </div>
                    </div>
                </div>
            </article>
        </div>

        <div class="row spacer"></div>

        <div class="row footer panel"></div>
    </div>

</body>
</html>

<script src="js/pako.js"></script>
<script src="js/upng.js"></script>
<script src="js/player.js"></script>

<script>
    var player = new Player('player')
    player.loadAndRedraw('samples/sample-0', 'samples/sample-0.png')

    var select_sample = document.querySelector('#select-sample')

    function update() {
        var audio_fname = "samples/" + select_sample.value
        var img_fname = "samples/" + select_sample.value + ".png"
        player.loadAndRedraw(audio_fname, img_fname)
    }

    select_sample.addEventListener('change', update)
    window.addEventListener("resize", function() {player.redraw()})
</script>