<!DOCTYPE html>
<html lang="en">

<head>
    <title>MP3net</title>

    <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/player.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="box">
        <div class="row header panel"></div>

        <div class="row spacer"></div>

        <div class="row content panel">
            <article id="post-0" class="exhibit post-0 post type-post status-publish format-standard hentry category-uncategorized tag-data-visualization tag-map">

                <header class="entry-header">
                    <h1 class="entry-title">MP3net</h1>
                </header><!-- .entry-header -->

                <p>
                    MP3net is deep convolutional GAN which leverages techniques from MP3/Vorbis audio compression to produce long,
                    high-quality audio tracks with long-range coherence.
                </p>
                <p>
                    The model uses a Modified Discrete Cosine Transform (MDCT) data representation,
                    which includes all phase information. Phase generation is hence integral part
                    of the model. We leverage the auditory masking and psychoacoustic perception
                    limit of the human ear to widen the true distribution and stabilize the training
                    process.
                </p>
                <p>
                    The model architecture is a deep 2D convolutional network, where each
                    subsequent generator model block increases the resolution along the time axis
                    and adds a higher octave along the frequency axis. The deeper layers are connected
                    with all parts of the output and have the context of the full track. This enables
                    generation of samples which exhibit long-range coherence.
                </p>
                <p>
                    We use MP3net to create
                    95s stereo tracks with a 22kHz sample rate after training for 250h on a single Cloud TPUv2.
                    An additional benefit of the CNN-based model architecture is that generation of new
                    songs is almost instantaneous. We also used the same model structure with a higher number of features
                    to generate shorter, 5s samples which exhibit better audio quality and a clearer piano timbre.
                </p>

                <div id='player' class='player'>
                    <div class='controls'>
                        <form name="selectorForm">
<table class='sample-selection'>
    <tr>
        <td><b>Short samples (120h training)</b></td>
        <td><b>Long samples after 250h training</b></td>
        <td><b>Samples during Xh training</b></td>
        <td><b>Real samples</b></td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160007_2' checked />
                5s sample 1
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_02' />
                95s sample 1
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_635000_0' />
                sample 207h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_00' />
                real sample 1
            </label>
        </td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160014_1' />
                5s sample 2
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_01' />
                95s sample 2
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_612000_0' />
                sample 200h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_01' />
                real sample 2
            </label>
        </td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160016_1' />
                5s sample 3
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_03' />
                95s sample 3
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_589000_0' />
                sample 192h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_02' />
                real sample 3
            </label>
        </td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160003_2' />
                5s sample 4
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_04' />
                95s sample 4
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_330000_0' />
                sample 109h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_03' />
                real sample 4
            </label>
        </td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160004_1' />
                5s sample 5
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_05' />
                95s sample 5
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_131000_0' />
                sample 42h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_04' />
                real sample 5
            </label>
        </td>
    </tr>
    <tr>
        <td>
            <label>
                <input type='radio' name='selectSample' value='short_fake_sample_160006_1' />
                5s sample 6
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_harvest749500_06' />
                95s sample 6
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='fake_sample_087000_0' />
                sample 28h
            </label>
        </td>
        <td>
            <label>
                <input type='radio' name='selectSample' value='real_sample_05' />
                real sample 6
            </label>
        </td>
    </tr>
</table>
                        </form>
                    </div>
                    <div class='spectrogram'>
                        <div class='crosshair'></div>
                        <div class='underlay'>
                            <img id="image" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" width="0" height="0" alt="" />
                        </div>
                        <div class="progressbar">
                            <span class="tracktime"></span>
                            <div class="progress"></div>
                        </div>
                    </div>
                    <div class='audio-controls'>
                        <button id="playpause" disabled class='playpause' title="play">
                            <svg class='play-img' width="14px" height="19px" viewBox="0 0 14 19">
                                <polygon id="Triangle" fill="#000000" transform="translate(9, 9.5) rotate(90) translate(-7, -9.5) " points="7 2.5 16.5 16.5 -2.5 16.5"></polygon>
                            </svg>
                            <svg class='pause-img' width="16px" height="19px" viewBox="0 0 16 19">
                                <g fill="#000000" stroke="#000000">
                                    <rect id="Rectangle" x="0.5" y="0.5" width="4" height="18"></rect>
                                    <rect id="Rectangle" x="11.5" y="0.5" width="4" height="18"></rect>
                                </g>
                            </svg>
                        </button>
                        <audio id='play-1' class='play'>
                            <source id='src1' src='samples/short_fake_sample_160007_2.ogg' type='audio/ogg'>
                        </audio>
                        <div class='response'>
                            <canvas class='response-canvas'></canvas>
                        </div>
                    </div>
                </div>
            </article>
        </div>

        <div class="row spacer"></div>

        <div class="row footer panel"></div>
    </div>

</body>
</html>

<script src="js/pako.js"></script>
<script src="js/upng.js"></script>
<script src="js/player.js"></script>

<script>
    var player = new Player('player')

    var selected_sample = 'short_fake_sample_160007_2'

    function update() {
        var audio_fname = "samples/" + selected_sample
        var img_fname = "samples/" + selected_sample + ".png"
        player.loadAndRedraw(audio_fname, img_fname)
    }

    var selector = document.selectorForm.selectSample
    for (var i = 0; i < selector.length; i++) {
        selector[i].addEventListener('change', function() {
            selected_sample = this.value;
            update();
        });
    }
    window.addEventListener("resize", function() {player.redraw()})
    window.addEventListener("load", update);
</script>