<!DOCTYPE html>
<html lang="en">

<head>
    <title>MP3net</title>

    <link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/blog.css">
    <link rel="stylesheet" type="text/css" href="css/player.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class='header'>
        <h1>MP3net</h1>
        <div class='line'>
        <div id='subtitle'>A Convolutional Generative Model for Audio </div>
        </div>
    </div>

    <div id='first' class='full-width'>
        <div class='intro-demo'>
            <div class='intro'>
                <p>
                    Existing generative models for audio have predominantly aimed to directly model time-domain waveforms. MelNet instead aims to model the frequency content of an audio signal. MelNet can be used to model audio unconditionally, making it capable of tasks such as music generation. It can also be conditioned on text and speaker, making it applicable to tasks such as text-to-speech and voice conversion.  The full paper is available on arXiv: <a href='https://arxiv.org/abs/1906.01083' target="_blank">https://arxiv.org/abs/1906.01083</a>.
                </p>
                <p>
                    <strong>Demo:</strong> Select a speaker and a sentence to view a spectrogram generated by MelNet. Play the audio to visualize how the frequencies change over time.
                </p>
            </div>
            <div id='demo-3' class='demo'>
                <div id='player-3' class='player'>
                    <div class='controls'>
                        <p>
                            Speaker:
                            <select id='select-speaker'>
                              <option value="BillGates">Bill Gates</option>
                              <option value="DaphneKoller">Daphne Koller</option>
                              <option value="FeiFeiLi">Fei-Fei Li</option>
                              <option value="GeorgeTakei">George Takei</option>
                              <option value="JaneGoodall">Jane Goodall</option>
                              <option value="SalmanKhan">Sal Khan</option>
                              <option value="StephenWolfram">Stephen Wolfram</option>
                              <option value="StephenHawking">Stephen Hawking</option>
                            </select>
                        </p>
                    </div>
                    <div class='spectrogram'>
                        <div class='overlay'></div>
                        <div class='underlay'>
                            <img src='samples/figs/ted_speakers/BillGates/sample-0.png'>
                        </div>
                    </div>
                    <div class='audio-controls'>
                        <button id="playpause" disabled class='playpause' title="play">
                            <svg class='play-img' width="14px" height="19px" viewBox="0 0 14 19">
                                <polygon id="Triangle" fill="#000000" transform="translate(9, 9.5) rotate(90) translate(-7, -9.5) " points="7 2.5 16.5 16.5 -2.5 16.5"></polygon>
                            </svg>
                            <svg class='pause-img' width="16px" height="19px" viewBox="0 0 16 19">
                                <g fill="#000000" stroke="#000000">
                                    <rect id="Rectangle" x="0.5" y="0.5" width="4" height="18"></rect>
                                    <rect id="Rectangle" x="11.5" y="0.5" width="4" height="18"></rect>
                                </g>
                            </svg>
                        </button>
                        <audio id='play-1' class='play'>
                            <source id='src1' src='samples/figs/ted_speakers/BillGates/sample-0.ogg' type='audio/ogg'>
                            <source id='src2' src='samples/figs/ted_speakers/BillGates/sample-0.wav' type='audio/wav'>
                        </audio>
                        <div class='response'>
                            <canvas class='response-canvas'></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class='section'>
        <h2>The Frequency Domain</h2>
       <!--  <p>
        A brief primer on time and frequency representations of audio.
        </p>
        <h3>Background: The Frequency Domain</h3>
        <p> -->
        <p>
        We begin with a brief primer on time and frequency representations of audio.
        A signal has equivalent representations in the time domain and the frequency domain.  This notion is pervasive in the analysis of highly periodic signals such as audio waveforms.  In the time domain, audio is represented as a one-dimensional waveform&mdash;amplitude as a function of time.  By way of the Fourier transform, this waveform can be decomposed into a sum of periodic signals.  The amplitudes and frequencies of these periodic signals constitute the waveform's frequency-domain representation, which is visualized in the animation below:
        </p>

        <div class='fig-container'>
            <figure id='fourier-div'>
                <img id='fourier' src='../../figures/fourier4.gif'>
            </figure>

            <figcaption>
                <p class='caption'>
                A visualization of the relationship between a function in the <span style='color: rgb(189, 41, 32);'>time domain</span> and the <span style='color: rgb(37, 94, 182);'>frequency domain</span>. The time-domain waveform can be represented as a weighted sum of periodic functions of varying frequencies. [<a target='_blank' href='https://en.wikipedia.org/wiki/Frequency_domain#/media/File:Fourier_transform_time_and_frequency_domains_(small).gif'>Image source</a>]
                </p>
            </figcaption>
        </div>
        
    </div>

    <hr>

</body>
</html>

<script src="js/pako.js"></script>
<script src="js/upng.js"></script>
<script src="js/player.js"></script>

<script type="text/javascript">

    function tier_resize() {
        for (let i = 0; i < 6; i++) {
            var c = document.getElementById('tier-container' + i.toString())
            var img = document.getElementById('tier' + i.toString())
            img.style.width = c.parentElement.offsetWidth + 'px'
        }
    }

    tier_resize()
    window.addEventListener("resize", tier_resize)

    var tier = 0

    function state() {
        if (tier == 5) {
            document.getElementById('tier-fw').className = 'change-tier change-tier-selected'
        } else {
            document.getElementById('tier-fw').className = 'change-tier'
        }


        if (tier == 0) {
            document.getElementById('tier-bw').className = 'change-tier change-tier-selected'
        } else {
            document.getElementById('tier-bw').className = 'change-tier'
        }

    }

    function change(prev_tier, next_tier) {
        next_tier = Math.max(Math.min(next_tier, 5), 0)
        if (prev_tier < next_tier) {
            document.getElementById('tier-container' + next_tier.toString()).style.width = '100%'
        } else if (prev_tier > next_tier) {
            document.getElementById('tier-container' + prev_tier.toString()).style.width = '0%'
        }
        tier = next_tier
        state()







    }

    document.getElementById('tier-fw').onclick = () => {tier += 1; change(tier - 1, tier)}
    document.getElementById('tier-bw').onclick = () => {tier -= 1; change(tier + 1, tier)}


    document.getElementById('tier-fw').onmousedown = () => {document.getElementById('tier-fw').className = 'change-tier change-tier-selected';}
    document.getElementById('tier-fw').onmouseup = () => {if(tier <=4) {document.getElementById('tier-fw').className = 'change-tier';}}
    document.getElementById('tier-fw').onmouseout = () => {if(tier <=4) {document.getElementById('tier-fw').className = 'change-tier';}}

    document.getElementById('tier-bw').onmousedown = () => {document.getElementById('tier-bw').className = 'change-tier change-tier-selected';}
    document.getElementById('tier-bw').onmouseup = () => {if(tier >=1) {document.getElementById('tier-bw').className = 'change-tier';}}
    document.getElementById('tier-bw').onmouseout = () => {if(tier >=1) {document.getElementById('tier-bw').className = 'change-tier';}}




</script>

<script type="text/javascript">
    var button = document.getElementById('zoom1')
    var button2 = document.getElementById('zoom2')
    var button3 = document.getElementById('zoom3')
    var button4 = document.getElementById('zoom4')
    var waveform = document.getElementById('waveform')

    var left = document.getElementById('over-left')
    var right = document.getElementById('over-right')

    var selected = button

    function update() {

        var scale = this.name

        var prev_selected = selected
        selected = this

        prev_selected.className = 'zoom'
        selected.className = 'zoom zoom-selected'

        // prev_selected.style['background-color:hover'] = 'rgba(0, 0, 0, 0.04)'

        var width = 100*((parseInt(scale) - 1) / (2*(parseInt(scale))))
        left.style.width = width.toString() + '%'
        right.style.width = width.toString() + '%'


        right.addEventListener("transitionend", function() {
            waveform.src='../../figures/waveform' + scale + 'x.svg'
        });
    }

    button.onclick = update
    button2.onclick = update
    button3.onclick = update
    button4.onclick = update

</script>

<script>
    var p1 = new Player('player-1')
    p1.load('samples/figs/maestro/sample-0', 'samples/figs/maestro/sample-0.png')

    var select_dataset = document.querySelector('#select-dataset')
    var select_sample = document.querySelector('#select-sample')

    function update() {
        var audio_fname = "samples/figs/" + select_dataset.value + "/sample-" + select_sample.value
        var img_fname = "samples/figs/" + select_dataset.value + "/sample-" + select_sample.value + ".png"
        p1.load(audio_fname, img_fname)
    }
    select_dataset.addEventListener('change', update)
    select_sample.addEventListener('change', update)
    window.addEventListener("resize", function() {p1.redraw()})
</script>

<script>
    ted_sents = [
        "it wasn't like i was asking for the code to a nuclear bunker or anything like that but the amount of resistance i got from this",
        "and no matter what the rest of the world tells them they should be",
        "chances are that they are rooted in the productivity crisis",
        "and we were down to eating one meal a day running from place to place but wherever we could help we did at a certain point in time in",
        "syria was largely a place of tolerance historically accustomed",
        "the years went by and the princess grew up into a beautiful young woman",
        "and when they came back and told us about it we really started thinking about the ways in which we see styrofoam every day",
        "i spent so much time learning this language why do i only",
        "phrases and words even if you have a phd of chinese language you can't understand them",
        "that every person here every decision that you've made today every decision you've made in your life you've not really made that decision but in fact",
        // "and what that form is modeling and shaping is not cement",
        // "is only a very recent religious enthusiasm it surfaced only in the west",
        // "i cannot face your fears or chase your dreams and you can't do that for me but we can be supportive of eachother",
        // "the first law of travel and therefore of life youre only as strong",
        // "it is the earth as we know it it is seen from in this case from outside the orbit of saturn",
    ]
    blizzard_sents = [
        "&ldquo;My dear Fanny, you feel these things a great deal too much. I am most happy that you like the chain,&rdquo;",
        "&ldquo;I saw his fallibilities: I comprehended them.&rdquo;",
        "Lydia was Lydia still; untamed, unabashed, wild, noisy, and fearless.",
        "Looking with a half fantastic curiosity to see whether the tender grass of early spring,",
        "Which a too curious reflection was apt to disturb in its ecclesiastical and military compeers. For once medievalism and modernism had a common stand-point.",
        "&ldquo;I like them round,&rdquo; said Mary. &ldquo;And they are exactly the color of the sky over the moor.&rdquo;",
        "&ldquo;Oh, he has been away from New York&mdash;he has been all round the world. He doesn't know many people here, but he's very sociable, and he wants to know every one.&rdquo;",
    ]

    var p2 = new Player('player-2')
    p2.load('samples/figs/blizzard_tts/sample-0', 'samples/figs/blizzard_tts/sample-0.png')

    var select_sample2 = document.querySelector('#select-sample2')
    var select_dataset2 = document.querySelector('#select-dataset2')
    var sample_text = document.querySelector('#sample-text')

    function update2() {
        if (select_dataset2.value == 'ted') {
            var text = ted_sents[select_sample2.value]
            var audio_fname = "samples/figs/ted/sample-" + select_sample2.value
            var img_fname = "samples/figs/ted/sample-" + select_sample2.value + ".png"
        } else {
            var text = blizzard_sents[select_sample2.value]
            var audio_fname = "samples/figs/blizzard_tts/sample-" + select_sample2.value
            var img_fname = "samples/figs/blizzard_tts/sample-" + select_sample2.value + ".png"
        }
        p2.load(audio_fname, img_fname)
        sample_text.innerHTML = text
    }
    select_dataset2.addEventListener('change', update2)
    select_sample2.addEventListener('change', update2)
    window.addEventListener("resize", function() {p2.redraw()})
</script>

<script>
    var p3 = new Player('player-3')
    p3.load('samples/figs/ted_speakers/BillGates/sample-0', 'samples/figs/ted_speakers/BillGates/sample-0.png')

    var select_text = document.querySelector('#select-text')
    var select_speaker = document.querySelector('#select-speaker')

    function update3() {
        var audio_fname = "samples/figs/ted_speakers/" + select_speaker.value + "/sample-" + select_text.value
        var img_fname = "samples/figs/ted_speakers/" + select_speaker.value + "/sample-" + select_text.value + ".png"
        p3.load(audio_fname, img_fname)
    }
    select_text.addEventListener('change', update3)
    select_speaker.addEventListener('change', update3)
    window.addEventListener("resize", function() {p3.redraw()})
</script>